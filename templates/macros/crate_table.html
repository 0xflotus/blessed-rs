{% macro crate_table(purposes) %}
 <table class="full-width fixed-layout">
  <thead>
    <tr>
      <th class="use-case-column">Use Case</th>
      <!-- <th width="100">Recommendation</th> -->
      <!-- <th>Latest Version</th> -->
      <!-- <th>Last Updated</th> -->
      <!-- <th>Notes</th> -->
      <th>Recommended Crates</th>
    </tr>
  </thead>
  {% for purpose in purposes %}
    <tbody>
      <!--{% for crate in purpose.crates %}
        <tr>
          {% if loop.index0 == 0 %}<td rowspan="{{ purpose.crates | length }} ">{{ purpose.name }}</td>{% endif %}
          <td><a href="https://docs.rs/{{ crate.name }}">{{ crate.name }}</a></td>
          <td class="crate-notes">{{ crate.notes | safe }}</td>
        </tr>
      {% endfor %} -->
      <tr>
        <td>{{ purpose.name }}</td>
        <td>
          <!-- <ul> -->
          {% if purpose.notes %}
            <p style="margin: 3px 6px 6px 6px;font-style: italic;color: #666">{{ purpose.notes | safe }}</p>
          {% endif %}
          {% for crate in purpose.crates %}
              <p style="margin: 3px 6px;max-width: 600px">
                <b><a href="{% if crate.link %}{{ crate.link }}{% else %}https://lib.rs/{{ crate.name }}{% endif %}">{{ crate.name }}</a></b>{% if not crate.link %}
                  <a style="margin-left: 3px;opacity: 0.7;color: #333;text-decoration: none" href="https://docs.rs/{{ crate.name }}"> [docs]</a>
                {% endif %}
                <br />
                {% if crate.notes %}{{ crate.notes | safe }}{% endif %}
              </p>
          {% endfor %}
          <!-- </ul> -->
        </td>
      </tr>
    </tbody>
  {% endfor %}
</table>
{% endmacro crate_table %}